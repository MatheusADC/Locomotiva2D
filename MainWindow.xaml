<Window x:Class="Locomotiva.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Locomotiva 2D" Height="450" Width="800"
    Loaded="Window_Loaded">

    <Window.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#FF6EC6" Offset="0.0" />
            <GradientStop Color="#9B30FF" Offset="0.5" />
            <GradientStop Color="#1E90FF" Offset="1.0" />
        </LinearGradientBrush>
    </Window.Background>

    <Window.Resources>
        <!-- Template da Roda -->
        <ControlTemplate x:Key="RodaTemplate" TargetType="Control">
            <Grid>
                <Ellipse 
                    Fill="#3A3A3A" 
                    Width="60" 
                    Height="60" />
                <Ellipse 
                    Fill="#555555" 
                    Width="50" 
                    Height="50" />
                <Rectangle 
                    Fill="#777777" 
                    Width="4" 
                    Height="48" 
                    RenderTransformOrigin="0.5,0.5">
                    <Rectangle.RenderTransform>
                        <RotateTransform Angle="0" />
                    </Rectangle.RenderTransform>
                </Rectangle>
                <Rectangle 
                    Fill="#777777" 
                    Width="4" 
                    Height="48" 
                    RenderTransformOrigin="0.5,0.5">
                    <Rectangle.RenderTransform>
                        <RotateTransform Angle="45" />
                    </Rectangle.RenderTransform>
                </Rectangle>
                <Rectangle 
                    Fill="#777777" 
                    Width="4" 
                    Height="48" 
                    RenderTransformOrigin="0.5,0.5">
                    <Rectangle.RenderTransform>
                        <RotateTransform Angle="90" />
                    </Rectangle.RenderTransform>
                </Rectangle>
                <Rectangle 
                    Fill="#777777" 
                    Width="4" 
                    Height="48" 
                    RenderTransformOrigin="0.5,0.5">
                    <Rectangle.RenderTransform>
                        <RotateTransform Angle="135" />
                    </Rectangle.RenderTransform>
                </Rectangle>
                <Ellipse 
                    x:Name="PinoConexao" 
                    Fill="DarkGoldenrod" 
                    Width="10" 
                    Height="10"
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center" />
            </Grid>
        </ControlTemplate>

        <Storyboard 
            x:Key="AnimacaoLocomotiva" 
            RepeatBehavior="Forever">
            <!-- Movimento horizontal da locomotiva -->
            <DoubleAnimation 
                Storyboard.TargetName="LocomotivaCanvas"
                Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                From="0" 
                To="500" 
                Duration="0:0:5"
                AutoReverse="True" 
                RepeatBehavior="Forever" />

            <!-- Animação das Rodas -->
            <DoubleAnimation 
                Storyboard.TargetName="RodaFrente"
                Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                From="0" 
                To="900" 
                Duration="0:0:5"
                AutoReverse="True" 
                RepeatBehavior="Forever" />
            <DoubleAnimation 
                Storyboard.TargetName="Roda1"
                Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                From="0" 
                To="900" 
                Duration="0:0:5"
                AutoReverse="True" 
                RepeatBehavior="Forever" />
            <DoubleAnimation Storyboard.TargetName="Roda2"
                Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                From="0" 
                To="900" 
                Duration="0:0:5"
                AutoReverse="True" 
                RepeatBehavior="Forever" />

            <!-- BielaAcoplamento -->
            <DoubleAnimation 
                Storyboard.TargetName="BielaAcoplamento"
                Storyboard.TargetProperty="Y2"
                From="75" 
                To="125" 
                Duration="0:0:0.5"
                AutoReverse="True" RepeatBehavior="Forever" />

            <!-- BielaPistao -->
            <DoubleAnimation 
                Storyboard.TargetName="BielaPistao"
                Storyboard.TargetProperty="Y2"
                From="125" 
                To="75" Duration="0:0:0.5"
                AutoReverse="True" 
                RepeatBehavior="Forever" />
        </Storyboard>
    </Window.Resources>

    <Grid>
        <!-- Trilhos -->
        <Rectangle 
            Fill="SaddleBrown" 
            Height="8" 
            Width="800" 
            Canvas.Bottom="50" />

        <Canvas 
            x:Name="LocomotivaCanvas" 
            Canvas.Top="150">
            <Canvas.RenderTransform>
                <TranslateTransform X="0" Y="0" />
            </Canvas.RenderTransform>

            <Grid 
                HorizontalAlignment="Center" 
                Height="130" 
                Canvas.Left="4" 
                Canvas.Top="73"
                VerticalAlignment="Top" 
                Width="280">
                <!-- Corpo da locomotiva -->
                <Rectangle 
                    Fill="Black" 
                    Width="20" 
                    Height="30" 
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top" 
                    Margin="40,0,0,0" />
                <Rectangle 
                    Fill="Black" 
                    Width="280" 
                    Height="20" 
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top" 
                    Margin="0,90,0,0" />
                <Rectangle 
                    Fill="DarkRed" 
                    Height="80" 
                    VerticalAlignment="Top" 
                    Margin="170,10,10,0" />
                <Polygon 
                    Fill="Black" 
                    Points="170,-10 270,-10 280,-20 160,-20"
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Top" 
                    Margin="0,20,0,0" />
                <Rectangle 
                    Fill="LightBlue" 
                    Width="40" 
                    Height="30" 
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top" 
                    Margin="180,20,0,0" />
                <Rectangle 
                    Fill="Firebrick" 
                    Width="150" 
                    Height="60" 
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top" 
                    Margin="20,30,0,0" />
                <Ellipse 
                    Fill="IndianRed" 
                    Width="40" 
                    Height="60" 
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top" 
                    Margin="0,30,0,0" />

                <!-- Rodas -->
                <Control 
                    x:Name="RodaFrente" 
                    Template="{StaticResource RodaTemplate}"
                    RenderTransformOrigin="0.5,0.5" 
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top" 
                    Margin="10,70,0,0">
                    <Control.RenderTransform>
                        <RotateTransform Angle="0" />
                    </Control.RenderTransform>
                </Control>
                <Control 
                    x:Name="Roda1" 
                    Template="{StaticResource RodaTemplate}"
                    RenderTransformOrigin="0.5,0.5" 
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top" 
                    Margin="90,70,0,0">
                    <Control.RenderTransform>
                        <RotateTransform Angle="0" />
                    </Control.RenderTransform>
                </Control>
                <Control 
                    x:Name="Roda2" 
                    Template="{StaticResource RodaTemplate}"
                    RenderTransformOrigin="0.5,0.5" 
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top" 
                    Margin="170,70,0,0">
                    <Control.RenderTransform>
                        <RotateTransform Angle="0" />
                    </Control.RenderTransform>
                </Control>

                <!-- Bielas -->
                <Line 
                    x:Name="BielaAcoplamento" 
                    Stroke="LightSlateGray" 
                    StrokeThickness="6" 
                    X1="40"
                    Y1="100"
                    X2="100" 
                    Y2="100" />
                <Line 
                    x:Name="BielaPistao" 
                    Stroke="LightSlateGray" 
                    StrokeThickness="6" 
                    X1="120"
                    Y1="100" 
                    X2="180" 
                    Y2="100" />
            </Grid>
        </Canvas>
    </Grid>
</Window>
